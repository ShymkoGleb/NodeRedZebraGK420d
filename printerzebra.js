module.exports = function(RED) {
    function PrinterZebraNode(config) {
        RED.nodes.createNode(this,config);
        var node = this;
        node.on('input', function(msg) {
   	   var printText = msg.payload;   

var tamplate = "\"^xa^^FO250,10^GFA,6450,6450,30,,::::::::::::::::gL0C,gK01C,gL0C,gL08,gL082,gL087O08,gH01C0087N01C,gH01C0082N01C,gI0C008218M08,V02L02008238M08,V07L01008218J08008,V07M0808204I01C008,V018I0180408102I01C008,W0CI01C0204081I02001,W06I01C01020408004002,W03J0200810206008004,W01J0100408103008008,X08J08020408180801,X04J040102040C0806,X02J0200810204080C,X01J0100400204081,Y08J080400204081,Y04J040400204081,Y02J020400204081,Y01IF020400204081,gH01020410204081N0E,gH03870E1870E1C38M0E,:U08L03870E1870E1C38L01,T01CL03870E1870E1C38L06,T01CL03870E1870E1C38L0C,U06L03870E1870E1C38K018,U01L03870E1870E1C38K02,V08K03870E3870E1C38K04,V04003XF8008,V02003XF8008,:::V02003CV0F8008,::::::V02003CV0IF88,V023FFCV0JF838,V03IFCV0IF8038,W03FFCV0F8I03,Y07CV0F8I04,Y03CV0F8I08,T03J03CV0F8001,T038I03CV0F8102038,U0403FFCV0IFC4038,U03JFCV0IF8007,W03FFCV0F8J0C,Y03CV0F8I018,Y03CV0F8I03,Y03CV0F8I06,U0CI03CL08J01J0F8I0C,U0E03FFCL0CJ01J0IF818,U01JFCK01CJ01J0JFE,W03FFCK016J01J0IF,P018M07CK036J01J0F8,P01FFEK03CK022J01J0F8,P01801K03CK023J01J0F8,T0CJ03CK061J01J0IF8J0C,T06003FFCK0418I01J0NFC,T03KFCK0C08I01J0IF8J0C,W03FFCK080CI01J0F8,Y07CJ0180CI01J0F8,Y03CJ01804I01J0F8,Y03CJ01006I01J0F8,Y03CJ03002I01J0IF8,R0CJ03FFCJ03IFI01J0KFE,Q01NFCJ06003I01J0IF801,R0CJ03FFCJ04001I01J0F8J08,Y07CJ040018001J0F8J04004,Y03CJ0CI08001J0F8J0200E,Y03CJ08I0C001J0F8M0E,Y07CI018I04001J0IF8,W03FFCI01J06001J0JFC,U03JFCI03J06001J0IF81C,U0403FFCI03J02001J0F8001C,U08I03CV0F8I0C,T01J03CV0F8,T02J03CV0F8,T04J03CV0IF,T08003FFCV0JFE,S0700JFCV0IF818,S070183FFCV0F8I07,S0203I03CV0F8I03,U06I03CV0F8I03,U0CI03CV0F8,T018I03CV0IF,T07003FFCV0JF,T0707IFCV0IF9,T02043FFCV0F801,V04007CV0F801,V04003CV0F801,::::::V04003XF801,:::V08003XF800C,U01L01870E1C38E1C38K06,U02L01870E1C38E1C38K01,U04L01870E1C38E1C38L0C,U08L01870E1C38E1C38L0E,T01M01870E1C38E1C38L0E,T06M01870E1C38E1C38,S01CM01870E1C38E1C38,S01CM018304081060818,T08O0204081040818,gJ0204081040CI018,gJ02040810406J04,gJ02040810403J02,gH01020408104018I01,gH0202040810200CJ08,gH04020604081006J04,gH08020302040803J02,gG010020181020401J01,gG0600200C08102008J08,gG0C00200204081007J04,g01I0C00102040807J06,g02007J081020403J03,g02007J0408202L01C,g02002J0308201L01C,g02M03882008L0C,g02M03882004,g03O082007,g07N01C2007,g03N01C2,gP082,gQ02,gQ06,gQ07,:,::::::::L08K08gN01FC,K018K0C003JFC003J03J0IF8J0FDF8J01K0C,K018K0CJ018J03J03J0CL01C01CJ018J0C,K03CK0CJ018J03J03J0CL03I06J01CJ0C,K024K0CJ018J03J03J0CL06I03J016J0C,K026K0CJ018J03J03J0CL0CI018I013J0C,K066K0CJ018J03J03J0CK018J0CI0138I0C,K043K0CJ018J03J03J0CK018J04I011CI0C,K0C3K0CJ018J03J03J0CK03K06I010CI0C,K081K0CJ018J03J03J0CK03K06I0106I0C,J01818J0CJ018J03J03J0CK02K02I0103I0C,J01808J0CJ018J03J01J0CK06K03I0101800C,J0100CJ0CJ018J03KFJ0IFI06K03I0100C00C,J0300CJ0CJ018J03KFJ0CK06K03I0100600C,J02006J0CJ018J03J01J0CK06K03I0100700C,J06006J0CJ018J03J03J0CK06K03I0100300C,J06006J0CJ018J03J03J0CK06K03I0100180C,J07IFJ0CJ018J03J03J0CK02K02I01I0C0C,J0C003J0CJ018J03J03J0CK03K06I01I060C,J080018I0CJ018J03J03J0CK03K06I01I030C,I0180018I0CJ018J03J03J0CK018J04I01I018C,I01J08I0CJ018J03J03J0CK018J0CI01I01CC,I03J0CI0CJ018J03J03J0CL0CI018I01J0CC,I03J04I0CJ018J03J03J0CL06I03J01J06C,I02J06I0CJ018J03J03J0CL03I06J01J03C,I06J06I0CJ018J03J03J0CL01C01CJ01J01C,I04J03I0CJ018J03J03J0IF8J0FDF8J01K0C,hG01FC,,:::::::::::::::^fs^FO10,220^GB 678,3,3^FS^CF 0,3,100^FO75,235^BCN,100,Y,N,Y,D^FD 601404af36e4420012af532a^FS^FO10,390^GB 678,3,3^FS^FX Third section with PartName^CF0,30^FO25,420^FD Part name: Supercool STUFF! ^xz\"";

var shellScript = "curl --get http://api.labelary.com/v1/printers/8dpmm/labels/3.4252x2.3622/0/ --data-urlencode "+tamplate+" > /home/aitheon/Test/label2.png && lp -d Zebra_Technologies_ZTC_GK420d -o media=raw /home/aitheon/Test/label2.png";
           const exec = require('child_process').exec;  
		exec(shellScript, (err, stdout, stderr) => {  
   	   if (err) {  
   	   console.error(err);  
    return;  
  }  
  console.log(stdout);  
node.send(msg);
});  
        });
    }
    RED.nodes.registerType("printerzebra",PrinterZebraNode);
}

